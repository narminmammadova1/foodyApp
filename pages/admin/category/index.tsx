import React, { useContext, useEffect } from 'react'
import SideBar from '../../../components/Admin/SideBar'
import AdminHeader from '../../../components/Admin/Header'
import Head from 'next/head'
import Layout from '../../../components/Layout'
import TopDiv from '../../../components/Admin/TopDiv'
import CategoryCard from '../../../components/Admin/CategoryCard'
import { useModal } from '../../../shared/hooks/useModal'
import AdminModal from '../../../components/UI/AdminModal'
import { NextPage } from 'next'
import { useGlobalContext } from '../../../Context/GlobalContext'
import { divider } from '@nextui-org/react'
import { ROUTER } from '../../../Constant/Router'
import { useRouter } from 'next/router'
import { useTranslation } from 'react-i18next'

const Category :NextPage = () => {
  const{formComponent,setFormComponent,isAdmin,setIsAdmin}=useGlobalContext() || {}
  const router=useRouter()

  useEffect(() => {
    const storedIsAdmin = localStorage.getItem('isAdmin');
    setIsAdmin(storedIsAdmin === 'true');
  }, []);

  

  

  const {isOpen,open,close}=useModal()


const {t}=useTranslation()

return (
  <>
    {isAdmin ? (
      <div>
        <Head>
          <title>{t("Category")}</title>
          <meta name="description" content="Generated by create next app" />
          <link rel="icon" href="/favicon.ico" />
        </Head>

        <Layout>
          <AdminModal modalType="addCategory" formm={formComponent}  btnText={t("Create Category" )} isOpen={isOpen} onClose={close}/>

          <AdminHeader/>
          <div className='flex'>
            <div className='hidden lg:block'>
            <SideBar/>
            </div>
            <div className='flex flex-col w-full mx-auto lg:ms-0 me-4'>
              <TopDiv addButton onClick={open} title={t("Category")} btnText={t("ADD CATEGORY")} selectText={t("Category type")}/>

              <div className='ms-2 flex gap-5 flex-wrap'>
                <CategoryCard  />
              </div>
            </div>
          </div>
        </Layout>
      </div>
    ) : (
      <>
     
      </>
    )}
  </>
)
}

export default Category
